<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Embed and analyze text — embedR • embedR</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Embed and analyze text — embedR"><meta property="og:description" content="The embedR package is an open-source R package to generate and analyze text embeddings. It gives access to state-of-the-art open and paid APIs from Hugging Face, OpenAI, and Cohere to gnerate text embeddings and offers methods to group, project, relabel, and visualize them. The following provides an overview of the package's functions:"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">embedR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/embedR.html">Overview</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/dwulff/embedR" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Embed and analyze text</h1>
    <small class="dont-index">Source: <a href="https://github.com/dwulff/embedR/blob/HEAD/R/embedR.R" class="external-link"><code>R/embedR.R</code></a></small>
    <div class="hidden name"><code>embedR.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>embedR</code> package is an open-source R package to generate and analyze text embeddings. It gives access to state-of-the-art open and paid APIs from <a href="https://huggingface.co/inference-api" class="external-link">Hugging Face</a>, <a href="https://openai.com/blog/openai-api" class="external-link">OpenAI</a>, and <a href="https://cohere.com/" class="external-link">Cohere</a> to gnerate text embeddings and offers methods to group, project, relabel, and visualize them. The following provides an overview of the package's functions:</p>
    </div>


    <div id="tokens">
    <h2>Tokens</h2>
    


<p><code><a href="er_set_tokens.html">er_set_tokens</a></code> sets access tokens for the APIs of Hugging Face, OpenAI, and Cohere.</p>
<p><code><a href="er_get_tokens.html">er_get_tokens</a></code> shows tokens that have been set during the current session.</p>
    </div>
    <div id="embed">
    <h2>Embed</h2>
    


<p><code><a href="er_embed.html">er_embed</a></code> generates state-of-the-art text embeddings using the APIs from <a href="https://huggingface.co/inference-api" class="external-link">Hugging Face</a>, <a href="https://openai.com/blog/openai-api" class="external-link">OpenAI</a>, and <a href="https://cohere.com/" class="external-link">Cohere</a>.</p>
    </div>
    <div id="process">
    <h2>Process</h2>
    


<p>.  <code><a href="er_group.html">er_group</a></code> groups identical or highly similar embedding vectors to produce group-based embeddings.</p>
<p><code><a href="er_project.html">er_project</a></code> projects embeddings into smaller dimensional spaces using MDS, UMAP, or PaCMAP.</p>
    </div>
    <div id="analyze">
    <h2>Analyze</h2>
    


<p><code><a href="er_compare_vectors.html">er_compare_vectors</a></code> computes a similarity matrix containing the similarities of all pairs of embedding vectors.</p>
<p><code><a href="er_compare_embeddings.html">er_compare_embeddings</a></code> computes the representational similarity of pairs of embeddings.</p>
<p><code><a href="er_cluster.html">er_cluster</a></code> clusters the embedding vectors into larger groups using hierarchical clustering, dbscan, or louvain clustering.</p>
    </div>
    <div id="helper">
    <h2>Helper</h2>
    


<p><code><a href="er_frame.html">er_frame</a></code> generates a tibble from the embedding objects including potential attributes.</p>
<p><code><a href="er_infer_labels.html">er_infer_labels</a></code> uses state-of-the-art generative models from <a href="https://huggingface.co/inference-api" class="external-link">Hugging Face</a> and <a href="https://openai.com/blog/openai-api" class="external-link">OpenAI</a> to generate category labels for groups of texts.</p>
    </div>
    <div id="visualize">
    <h2>Visualize</h2>
    


<p><code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></code> produces a 2D scatter plot of embedding vectors (typically after projection) with options for customization.</p>
    </div>
    <div id="data">
    <h2>Data</h2>
    


<p><code><a href="neo.html">neo</a></code> data set containing 300 items of the personality questionnaire NEO.</p>
<p><code><a href="ai.html">ai</a></code> data set containing 2,500 free associations of artificial intelligence provided by laypeople.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># load package</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dwulff/embedR" class="external-link">embedR</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set api tokens</span></span></span>
<span class="r-in"><span><span class="fu">er_set_token</span><span class="op">(</span><span class="st">"openai"</span> <span class="op">=</span> <span class="st">"TOKEN"</span>,</span></span>
<span class="r-in"><span>             <span class="st">"huggingface"</span> <span class="op">=</span> <span class="st">"TOKEN"</span>,</span></span>
<span class="r-in"><span>             <span class="st">"cohere"</span> <span class="op">=</span> <span class="st">"TOKEN"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># generate embedding</span></span></span>
<span class="r-in"><span><span class="va">embedding</span> <span class="op">=</span> <span class="va">neo</span><span class="op">$</span><span class="va">text</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># generate text embedding</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="er_embed.html">er_embed</a></span><span class="op">(</span>api <span class="op">=</span> <span class="st">"openai"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># analyze embedding</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">=</span> <span class="va">embedding</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># group similar texts</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="er_group.html">er_group</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"fuzzy"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># generate 2D projection</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="er_project.html">er_project</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"umap"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># cluster projection</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="er_cluster.html">er_cluster</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"louvain"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># produce data frame</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="er_frame.html">er_frame</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># re-label text groups</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">=</span> <span class="va">embedding</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># relabel groups</span></span></span>
<span class="r-in"><span>  <span class="fu">er_mutate</span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">label</span><span class="op">(</span><span class="va">group_texts</span>,</span></span>
<span class="r-in"><span>                           api <span class="op">=</span> <span class="st">"openai"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># visualize</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Dirk U. Wulff.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

